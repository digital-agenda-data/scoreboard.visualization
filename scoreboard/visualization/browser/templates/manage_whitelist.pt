<html metal:use-macro="here/main_template/macros/master"
  i18n:domain="plone">
  <div metal:fill-slot="main">
  <h1>Manage whitelist</h1>
      <div class="whitelist-manage bootstrap" tal:define="msg view/msg">
      <span class="info-msg" tal:content="msg" />
      <form action="." enctype="multipart/form-data" method="post"
       tal:attributes="action request/getURL;"
       tal:define="error view/error">
          <label for="file" class="error" tal:content="error" /><br />
          <input type="file" name="file">
          <input type="submit" class="btn btn-mini btn-primary"
           name="form.submitted" value="Import XLS" />
          <input type="submit" class="btn btn-mini" name="export"
           value="Export XLS" />
      </form>
    </div>
    <div class="whitelist" tal:define="whitelist view/whitelist">
        <table tal:define="labels view/getLabels">
            <tr>
                <th tal:repeat="key labels" tal:content="key"></th>
            </tr>
            <tr tal:repeat="item whitelist">
                <td tal:repeat="key labels" tal:content="python: item.get(key)"/>
            </tr>
        </table>
    </div>
</div>
</html>
